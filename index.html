<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>VoltEdge Timer Pro: Ultimate Productivity Timer</title>
    <meta name="description" content="The most advanced web timer with themes, analytics, multiple timers, and productivity features. Perfect for Pomodoro, workouts, and focus sessions.">
    <meta name="keywords" content="pomodoro timer, productivity timer, focus timer, workout timer, study timer, VoltEdge, time management">
    <meta name="author" content="VoltEdge Builds">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            500: '#7c3aed',
                            600: '#6d28d9',
                        },
                        secondary: {
                            500: '#06b6d4',
                            600: '#0891b2',
                        },
                        dark: {
                            900: '#0f1724',
                            800: '#0b1220',
                            700: '#1e293b',
                        },
                        glass: 'rgba(255,255,255,0.04)',
                        'glass-border': 'rgba(255,255,255,0.06)',
                        muted: 'rgba(255,255,255,0.6)',
                    },
                    animation: {
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'bounce-slow': 'bounce 2s infinite',
                        'spin-slow': 'spin 4s linear infinite',
                    },
                    keyframes: {
                        wave: {
                            '0%': { transform: 'rotate(0deg)' },
                            '10%': { transform: 'rotate(14deg)' },
                            '20%': { transform: 'rotate(-8deg)' },
                            '30%': { transform: 'rotate(14deg)' },
                            '40%': { transform: 'rotate(-4deg)' },
                            '50%': { transform: 'rotate(10deg)' },
                            '60%': { transform: 'rotate(0deg)' },
                            '100%': { transform: 'rotate(0deg)' },
                        }
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background: radial-gradient(1200px 600px at 10% 10%, rgba(124, 58, 237, 0.12), transparent),
                        radial-gradient(900px 400px at 90% 90%, rgba(6, 182, 212, 0.06), transparent),
                        linear-gradient(180deg, #0f1724, #0b1220);
            color: #fff;
            min-height: 100vh;
            transition: all 0.3s ease;
        }
        
        .glass-card {
            background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
            border: 1px solid rgba(255,255,255,0.06);
            backdrop-filter: blur(8px);
            box-shadow: 0 8px 30px rgba(2,6,23,0.6);
            transition: all 0.3s ease;
        }
        
        .glass-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 40px rgba(2,6,23,0.8);
        }
        
        .progress-ring {
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
        }
        
        .progress-ring-circle {
            stroke-dasharray: 628.3185307179587;
            stroke-dashoffset: 628.3185307179587;
            transition: stroke-dashoffset 0.5s ease;
            stroke-linecap: round;
        }
        
        .theme-selector {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            cursor: pointer;
            transition: transform 0.2s ease;
        }
        
        .theme-selector:hover {
            transform: scale(1.1);
        }
        
        .timer-tab {
            transition: all 0.3s ease;
        }
        
        .timer-tab.active {
            background: linear-gradient(90deg, rgba(124, 58, 237, 0.2), rgba(6, 182, 212, 0.2));
            border-color: rgba(255,255,255,0.1);
        }
        
        .task-item {
            transition: all 0.2s ease;
        }
        
        .task-item:hover {
            background: rgba(255,255,255,0.05);
        }
        
        .task-item.completed {
            opacity: 0.6;
            text-decoration: line-through;
        }
        
        .floating-action-btn {
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            transition: all 0.2s ease;
        }
        
        .floating-action-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 25px rgba(0,0,0,0.4);
        }
        
        .notification {
            animation: slideIn 0.3s ease forwards;
        }
        
        @keyframes slideIn {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .wave-animation {
            animation: wave 2s ease infinite;
        }
        
        .blob {
            filter: blur(40px);
            opacity: 0.3;
            position: absolute;
            z-index: -1;
        }
        
        .blob-1 {
            background: linear-gradient(90deg, #7c3aed, #06b6d4);
            width: 300px;
            height: 300px;
            top: 10%;
            left: 10%;
            animation: move 20s infinite alternate;
        }
        
        .blob-2 {
            background: linear-gradient(90deg, #06b6d4, #7c3aed);
            width: 400px;
            height: 400px;
            bottom: 10%;
            right: 10%;
            animation: move 25s infinite alternate-reverse;
        }
        
        @keyframes move {
            0% { transform: translate(0, 0); }
            25% { transform: translate(50px, 50px); }
            50% { transform: translate(100px, -50px); }
            75% { transform: translate(-50px, 50px); }
            100% { transform: translate(-100px, -50px); }
        }
        
        .task-input:focus + .task-input-border {
            width: 100%;
        }
        
        .task-input-border {
            height: 2px;
            background: linear-gradient(90deg, #7c3aed, #06b6d4);
            transition: width 0.3s ease;
        }
    </style>
</head>
<body class="relative overflow-x-hidden">
    <!-- Background blobs -->
    <div class="blob blob-1"></div>
    <div class="blob blob-2"></div>
    
    <!-- Notification container -->
    <div id="notificationContainer" class="fixed top-4 right-4 z-50 space-y-2 w-72"></div>
    
    <div class="container mx-auto px-4 py-8 max-w-6xl">
        <!-- Header -->
        <div class="flex justify-between items-center mb-8">
            <div class="flex items-center space-x-3">
                <div class="w-12 h-12 rounded-xl bg-gradient-to-r from-primary-500 to-secondary-500 flex items-center justify-center text-white font-bold text-xl">
                    <span class="wave-animation">V</span>
                </div>
                <div>
                    <h1 class="text-2xl font-bold">VoltEdge Timer Pro</h1>
                    <p class="text-xs text-muted">Ultimate productivity companion</p>
                </div>
            </div>
            <div class="flex items-center space-x-4">
                <button id="statsBtn" class="p-2 rounded-lg hover:bg-glass transition-colors">
                    <i class="fas fa-chart-line"></i>
                </button>
                <button id="settingsBtn" class="p-2 rounded-lg hover:bg-glass transition-colors">
                    <i class="fas fa-cog"></i>
                </button>
                <div class="flex space-x-2">
                    <div class="theme-selector bg-gradient-to-r from-purple-500 to-pink-500" data-theme="purple-pink"></div>
                    <div class="theme-selector bg-gradient-to-r from-blue-500 to-teal-500" data-theme="blue-teal"></div>
                    <div class="theme-selector bg-gradient-to-r from-orange-500 to-red-500" data-theme="orange-red"></div>
                    <div class="theme-selector bg-gradient-to-r from-green-500 to-emerald-500" data-theme="green-emerald"></div>
                </div>
            </div>
        </div>
        
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <!-- Main timer section -->
            <div class="lg:col-span-2 space-y-6">
                <!-- Timer tabs -->
                <div class="flex space-x-2">
                    <button class="timer-tab active px-4 py-2 rounded-lg border border-glass-border" data-timer="pomodoro">Pomodoro</button>
                    <button class="timer-tab px-4 py-2 rounded-lg border border-glass-border" data-timer="short-break">Short Break</button>
                    <button class="timer-tab px-4 py-2 rounded-lg border border-glass-border" data-timer="long-break">Long Break</button>
                    <button class="timer-tab px-4 py-2 rounded-lg border border-glass-border" data-timer="custom">Custom</button>
                </div>
                
                <!-- Timer display -->
                <div class="glass-card rounded-2xl p-8 flex flex-col items-center">
                    <div class="relative w-64 h-64 mb-6">
                        <svg class="progress-ring w-full h-full" viewBox="0 0 200 200">
                            <circle class="progress-ring-circle" cx="100" cy="100" r="90" fill="transparent" stroke="rgba(255,255,255,0.03)" stroke-width="10"/>
                            <circle id="progressCircle" class="progress-ring-circle" cx="100" cy="100" r="90" fill="transparent" stroke="url(#gradient)" stroke-width="10"/>
                            <defs>
                                <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="0%">
                                    <stop offset="0%" stop-color="#7c3aed"/>
                                    <stop offset="100%" stop-color="#06b6d4"/>
                                </linearGradient>
                            </defs>
                        </svg>
                        <div class="absolute inset-0 flex flex-col items-center justify-center">
                            <div id="timeDisplay" class="text-5xl font-bold mb-2 cursor-pointer">25:00</div>
                            <div id="timerStatus" class="text-muted text-sm">Ready</div>
                        </div>
                    </div>
                    
                    <!-- Timer controls -->
                    <div class="flex space-x-4 mb-6">
                        <button id="startBtn" class="px-6 py-3 rounded-xl bg-gradient-to-r from-primary-500 to-secondary-500 font-medium hover:opacity-90 transition-opacity">
                            <i class="fas fa-play mr-2"></i> Start
                        </button>
                        <button id="pauseBtn" class="px-6 py-3 rounded-xl bg-glass border border-glass-border font-medium hover:bg-glass/50 transition-colors">
                            <i class="fas fa-pause mr-2"></i> Pause
                        </button>
                        <button id="resetBtn" class="px-6 py-3 rounded-xl bg-glass border border-glass-border font-medium hover:bg-glass/50 transition-colors">
                            <i class="fas fa-redo mr-2"></i> Reset
                        </button>
                    </div>
                    
                    <!-- Presets -->
                    <div class="flex flex-wrap justify-center gap-2">
                        <button class="preset-btn px-4 py-2 rounded-lg bg-glass border border-glass-border text-sm hover:bg-glass/50 transition-colors" data-minutes="5">5 min</button>
                        <button class="preset-btn px-4 py-2 rounded-lg bg-glass border border-glass-border text-sm hover:bg-glass/50 transition-colors" data-minutes="15">15 min</button>
                        <button class="preset-btn px-4 py-2 rounded-lg bg-glass border border-glass-border text-sm hover:bg-glass/50 transition-colors" data-minutes="25">25 min</button>
                        <button class="preset-btn px-4 py-2 rounded-lg bg-glass border border-glass-border text-sm hover:bg-glass/50 transition-colors" data-minutes="45">45 min</button>
                        <button class="preset-btn px-4 py-2 rounded-lg bg-glass border border-glass-border text-sm hover:bg-glass/50 transition-colors" data-minutes="60">60 min</button>
                    </div>
                </div>
                
                <!-- Task list -->
                <div class="glass-card rounded-2xl p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h2 class="text-lg font-medium">Today's Tasks</h2>
                        <button id="addTaskBtn" class="p-2 rounded-lg hover:bg-glass transition-colors">
                            <i class="fas fa-plus"></i>
                        </button>
                    </div>
                    
                    <div id="taskInputContainer" class="hidden mb-4">
                        <div class="relative">
                            <input id="taskInput" type="text" placeholder="What needs to be done?" class="task-input w-full bg-transparent border-0 border-b border-glass-border focus:border-0 focus:ring-0 pb-2">
                            <div class="task-input-border absolute bottom-0 left-0 w-0"></div>
                        </div>
                        <div class="flex justify-end space-x-2 mt-2">
                            <button id="cancelTaskBtn" class="px-3 py-1 text-sm rounded-lg bg-glass border border-glass-border">Cancel</button>
                            <button id="saveTaskBtn" class="px-3 py-1 text-sm rounded-lg bg-gradient-to-r from-primary-500 to-secondary-500">Add Task</button>
                        </div>
                    </div>
                    
                    <div id="taskList" class="space-y-2">
                        <!-- Tasks will be added here dynamically -->
                    </div>
                    
                    <div id="emptyTaskState" class="text-center py-8 text-muted">
                        <i class="fas fa-tasks text-3xl mb-2"></i>
                        <p>No tasks yet. Add your first task!</p>
                    </div>
                </div>
            </div>
            
            <!-- Sidebar -->
            <div class="space-y-6">
                <!-- Pomodoro stats -->
                <div class="glass-card rounded-2xl p-6">
                    <h2 class="text-lg font-medium mb-4">Today's Stats</h2>
                    <div class="grid grid-cols-3 gap-4 text-center mb-4">
                        <div>
                            <div class="text-2xl font-bold" id="pomodorosCompleted">0</div>
                            <div class="text-xs text-muted">Pomodoros</div>
                        </div>
                        <div>
                            <div class="text-2xl font-bold" id="tasksCompleted">0</div>
                            <div class="text-xs text-muted">Tasks</div>
                        </div>
                        <div>
                            <div class="text-2xl font-bold" id="focusTime">0h</div>
                            <div class="text-xs text-muted">Focus</div>
                        </div>
                    </div>
                    <canvas id="dailyChart" height="150"></canvas>
                </div>
                
                <!-- Quick notes -->
                <div class="glass-card rounded-2xl p-6">
                    <h2 class="text-lg font-medium mb-4">Quick Notes</h2>
                    <textarea id="quickNotes" class="w-full bg-transparent border border-glass-border rounded-lg p-3 text-sm focus:ring-1 focus:ring-primary-500/50 focus:border-primary-500/50 min-h-[120px]" placeholder="Jot down ideas, reminders..."></textarea>
                    <div class="flex justify-end mt-2">
                        <button id="saveNotesBtn" class="px-3 py-1 text-sm rounded-lg bg-gradient-to-r from-primary-500 to-secondary-500">Save</button>
                    </div>
                </div>
                
                <!-- Sound controls -->
                <div class="glass-card rounded-2xl p-6">
                    <h2 class="text-lg font-medium mb-4">Sound Settings</h2>
                    <div class="space-y-4">
                        <div>
                            <label class="text-sm block mb-1">Timer Sound</label>
                            <select id="timerSound" class="w-full bg-dark-700 border border-glass-border rounded-lg p-2 text-sm">
                                <option value="bell">Bell</option>
                                <option value="chime">Chime</option>
                                <option value="alarm">Alarm</option>
                                <option value="digital">Digital</option>
                                <option value="none">None</option>
                            </select>
                        </div>
                        <div>
                            <label class="text-sm block mb-1">Volume</label>
                            <input id="volumeControl" type="range" min="0" max="100" value="50" class="w-full">
                        </div>
                        <div class="flex items-center justify-between">
                            <label class="text-sm">Auto-start next timer</label>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input id="autoStartToggle" type="checkbox" class="sr-only peer">
                                <div class="w-11 h-6 bg-glass peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-500"></div>
                            </label>
                        </div>
                    </div>
                </div>
                
                <!-- Share timer -->
                <div class="glass-card rounded-2xl p-6">
                    <h2 class="text-lg font-medium mb-4">Share Timer</h2>
                    <div class="flex">
                        <input id="shareLink" type="text" readonly class="flex-1 bg-dark-700 border border-glass-border rounded-l-lg p-2 text-sm truncate">
                        <button id="copyLinkBtn" class="px-3 bg-glass border border-glass-border rounded-r-lg hover:bg-glass/50 transition-colors">
                            <i class="fas fa-copy"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Stats modal -->
    <div id="statsModal" class="fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 hidden">
        <div class="glass-card rounded-2xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-xl font-bold">Your Productivity Stats</h2>
                <button id="closeStatsModal" class="p-2 rounded-lg hover:bg-glass transition-colors">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                <div class="glass-card rounded-xl p-4">
                    <h3 class="font-medium mb-2">Weekly Focus</h3>
                    <canvas id="weeklyChart" height="200"></canvas>
                </div>
                <div class="glass-card rounded-xl p-4">
                    <h3 class="font-medium mb-2">Task Completion</h3>
                    <canvas id="taskChart" height="200"></canvas>
                </div>
            </div>
            
            <div class="glass-card rounded-xl p-4 mb-6">
                <h3 class="font-medium mb-2">Recent Sessions</h3>
                <div class="overflow-x-auto">
                    <table class="w-full text-sm">
                        <thead>
                            <tr class="border-b border-glass-border">
                                <th class="text-left py-2">Date</th>
                                <th class="text-left py-2">Type</th>
                                <th class="text-left py-2">Duration</th>
                                <th class="text-left py-2">Tasks</th>
                            </tr>
                        </thead>
                        <tbody id="sessionsTable">
                            <!-- Sessions will be added here -->
                        </tbody>
                    </table>
                </div>
            </div>
            
            <div class="flex justify-end">
                <button id="exportStatsBtn" class="px-4 py-2 rounded-lg bg-gradient-to-r from-primary-500 to-secondary-500">
                    <i class="fas fa-download mr-2"></i> Export Data
                </button>
            </div>
        </div>
    </div>
    
    <!-- Settings modal -->
    <div id="settingsModal" class="fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 hidden">
        <div class="glass-card rounded-2xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-xl font-bold">Settings</h2>
                <button id="closeSettingsModal" class="p-2 rounded-lg hover:bg-glass transition-colors">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="space-y-6">
                <div>
                    <h3 class="font-medium mb-4">Timer Presets</h3>
                    <div class="grid grid-cols-3 gap-4">
                        <div>
                            <label class="text-sm block mb-1">Pomodoro (min)</label>
                            <input id="pomodoroDuration" type="number" min="1" max="120" value="25" class="w-full bg-dark-700 border border-glass-border rounded-lg p-2">
                        </div>
                        <div>
                            <label class="text-sm block mb-1">Short Break (min)</label>
                            <input id="shortBreakDuration" type="number" min="1" max="30" value="5" class="w-full bg-dark-700 border border-glass-border rounded-lg p-2">
                        </div>
                        <div>
                            <label class="text-sm block mb-1">Long Break (min)</label>
                            <input id="longBreakDuration" type="number" min="1" max="60" value="15" class="w-full bg-dark-700 border border-glass-border rounded-lg p-2">
                        </div>
                    </div>
                </div>

                <div>
                    <h3 class="font-medium mb-4">Appearance</h3>
                    <div class="flex items-center justify-between mb-2">
                        <label class="text-sm">Dark Mode</label>
                        <label class="relative inline-flex items-center cursor-pointer">
                            <input id="darkModeToggle" type="checkbox" class="sr-only peer" checked>
                            <div class="w-11 h-6 bg-glass peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-500"></div>
                        </label>
                    </div>
                    <div class="flex items-center justify-between">
                        <label class="text-sm">Animations</label>
                        <label class="relative inline-flex items-center cursor-pointer">
                            <input id="animationsToggle" type="checkbox" class="sr-only peer" checked>
                            <div class="w-11 h-6 bg-glass peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-500"></div>
                        </label>
                    </div>
                </div>

                <div>
                    <h3 class="font-medium mb-4">Notifications</h3>
                    <div class="flex items-center justify-between mb-2">
                        <label class="text-sm">Timer End</label>
                        <label class="relative inline-flex items-center cursor-pointer">
                            <input id="timerEndNotificationToggle" type="checkbox" class="sr-only peer" checked>
                            <div class="w-11 h-6 bg-glass peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-500"></div>
                        </label>
                    </div>
                    <div class="flex items-center justify-between">
                        <label class="text-sm">Break Reminders</label>
                        <label class="relative inline-flex items-center cursor-pointer">
                            <input id="breakReminderToggle" type="checkbox" class="sr-only peer" checked>
                            <div class="w-11 h-6 bg-glass peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-500"></div>
                        </label>
                    </div>
                </div>

                <div>
                    <h3 class="font-medium mb-4">Data</h3>
                    <div class="flex space-x-2">
                        <button id="exportDataBtn" class="px-4 py-2 rounded-lg bg-glass border border-glass-border hover:bg-glass/50 transition-colors">
                            <i class="fas fa-download mr-2"></i> Export Data
                        </button>
                        <button id="importDataBtn" class="px-4 py-2 rounded-lg bg-glass border border-glass-border hover:bg-glass/50 transition-colors">
                            <i class="fas fa-upload mr-2"></i> Import Data
                        </button>
                        <button id="resetDataBtn" class="px-4 py-2 rounded-lg bg-glass border border-glass-border hover:bg-glass/50 transition-colors text-red-400">
                            <i class="fas fa-trash mr-2"></i> Reset
                        </button>
                    </div>
                </div>

                <div class="pt-4 border-t border-glass-border">
                    <div class="flex justify-between items-center">
                        <div>
                            <div class="text-sm text-muted">Version 1.2.0</div>
                            <div class="text-xs text-muted">Â© 2023 VoltEdge Builds</div>
                        </div>
                        <button id="saveSettingsBtn" class="px-4 py-2 rounded-lg bg-gradient-to-r from-primary-500 to-secondary-500">
                            Save Settings
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Floating action button -->
    <button id="quickStartBtn" class="floating-action-btn fixed bottom-6 right-6 w-14 h-14 rounded-full bg-gradient-to-r from-primary-500 to-secondary-500 flex items-center justify-center text-white shadow-lg">
        <i class="fas fa-bolt"></i>
    </button>

    <!-- App scripts -->
    <script>
        // Timer functionality
        class TimerApp {
            constructor() {
                this.currentTimer = 'pomodoro';
                this.isRunning = false;
                this.isPaused = false;
                this.timeLeft = 25 * 60; // 25 minutes in seconds
                this.totalTime = 25 * 60;
                this.interval = null;
                this.tasks = JSON.parse(localStorage.getItem('tasks') || '[]');
                this.stats = JSON.parse(localStorage.getItem('stats') || '{"pomodoros": 0, "tasks": 0, "focusTime": 0}');
                this.settings = JSON.parse(localStorage.getItem('settings') || '{"pomodoro": 25, "shortBreak": 5, "longBreak": 15, "volume": 50, "autoStart": false}');
                
                this.initializeElements();
                this.bindEvents();
                this.updateDisplay();
                this.loadTasks();
                this.updateStats();
                this.initializeCharts();
            }

            initializeElements() {
                this.timeDisplay = document.getElementById('timeDisplay');
                this.timerStatus = document.getElementById('timerStatus');
                this.progressCircle = document.getElementById('progressCircle');
                this.startBtn = document.getElementById('startBtn');
                this.pauseBtn = document.getElementById('pauseBtn');
                this.resetBtn = document.getElementById('resetBtn');
                this.taskList = document.getElementById('taskList');
                this.taskInput = document.getElementById('taskInput');
                this.emptyTaskState = document.getElementById('emptyTaskState');
                this.pomodorosCompleted = document.getElementById('pomodorosCompleted');
                this.tasksCompleted = document.getElementById('tasksCompleted');
                this.focusTime = document.getElementById('focusTime');
            }

            bindEvents() {
                // Timer controls
                this.startBtn.addEventListener('click', () => this.startTimer());
                this.pauseBtn.addEventListener('click', () => this.pauseTimer());
                this.resetBtn.addEventListener('click', () => this.resetTimer());

                // Timer tabs
                document.querySelectorAll('.timer-tab').forEach(tab => {
                    tab.addEventListener('click', (e) => this.switchTimer(e.target.dataset.timer));
                });

                // Preset buttons
                document.querySelectorAll('.preset-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => this.setCustomTime(parseInt(e.target.dataset.minutes)));
                });

                // Task management
                document.getElementById('addTaskBtn').addEventListener('click', () => this.showTaskInput());
                document.getElementById('saveTaskBtn').addEventListener('click', () => this.addTask());
                document.getElementById('cancelTaskBtn').addEventListener('click', () => this.hideTaskInput());
                this.taskInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') this.addTask();
                });

                // Modals
                document.getElementById('statsBtn').addEventListener('click', () => this.showStatsModal());
                document.getElementById('settingsBtn').addEventListener('click', () => this.showSettingsModal());
                document.getElementById('closeStatsModal').addEventListener('click', () => this.hideStatsModal());
                document.getElementById('closeSettingsModal').addEventListener('click', () => this.hideSettingsModal());
                document.getElementById('saveSettingsBtn').addEventListener('click', () => this.saveAndCloseSettings());

                // Theme selectors
                document.querySelectorAll('.theme-selector').forEach(selector => {
                    selector.addEventListener('click', (e) => this.changeTheme(e.target.dataset.theme));
                });

                // Quick start
                document.getElementById('quickStartBtn').addEventListener('click', () => this.quickStart());

                // Time display click to edit
                this.timeDisplay.addEventListener('click', () => this.editTime());

                // Settings
                document.getElementById('pomodoroDuration').addEventListener('change', (e) => {
                    this.settings.pomodoro = parseInt(e.target.value);
                    this.saveSettings();
                });
                document.getElementById('shortBreakDuration').addEventListener('change', (e) => {
                    this.settings.shortBreak = parseInt(e.target.value);
                    this.saveSettings();
                });
                document.getElementById('longBreakDuration').addEventListener('change', (e) => {
                    this.settings.longBreak = parseInt(e.target.value);
                    this.saveSettings();
                });

                // Notes
                document.getElementById('saveNotesBtn').addEventListener('click', () => this.saveNotes());

                // Copy link
                document.getElementById('copyLinkBtn').addEventListener('click', () => this.copyShareLink());

                // Data management
                document.getElementById('exportDataBtn').addEventListener('click', () => this.exportData());
                document.getElementById('importDataBtn').addEventListener('click', () => this.importData());
                document.getElementById('resetDataBtn').addEventListener('click', () => this.resetData());

                // Volume control
                document.getElementById('volumeControl').addEventListener('input', (e) => {
                    this.settings.volume = parseInt(e.target.value);
                    this.saveSettings();
                });

                // Auto-start toggle
                document.getElementById('autoStartToggle').addEventListener('change', (e) => {
                    this.settings.autoStart = e.target.checked;
                    this.saveSettings();
                });
            }

            startTimer() {
                if (!this.isRunning) {
                    this.isRunning = true;
                    this.isPaused = false;
                    this.timerStatus.textContent = 'Running';
                    this.startBtn.innerHTML = '<i class="fas fa-pause mr-2"></i> Pause';
                    
                    this.interval = setInterval(() => {
                        this.timeLeft--;
                        this.updateDisplay();
                        
                        if (this.timeLeft <= 0) {
                            this.completeTimer();
                        }
                    }, 1000);
                }
            }

            pauseTimer() {
                if (this.isRunning) {
                    this.isRunning = false;
                    this.isPaused = true;
                    clearInterval(this.interval);
                    this.timerStatus.textContent = 'Paused';
                    this.startBtn.innerHTML = '<i class="fas fa-play mr-2"></i> Resume';
                }
            }

            resetTimer() {
                this.isRunning = false;
                this.isPaused = false;
                clearInterval(this.interval);
                this.setTimerDuration();
                this.updateDisplay();
                this.timerStatus.textContent = 'Ready';
                this.startBtn.innerHTML = '<i class="fas fa-play mr-2"></i> Start';
            }

            completeTimer() {
                this.isRunning = false;
                clearInterval(this.interval);
                this.timerStatus.textContent = 'Completed!';
                this.startBtn.innerHTML = '<i class="fas fa-play mr-2"></i> Start';
                
                // Update stats
                if (this.currentTimer === 'pomodoro') {
                    this.stats.pomodoros++;
                    this.stats.focusTime += this.settings.pomodoro;
                }
                this.saveStats();
                this.updateStats();
                
                // Show notification
                this.showNotification('Timer completed!', 'success');
                
                // Play sound
                this.playSound();
                
                // Auto-start next timer if enabled
                if (this.settings.autoStart) {
                    setTimeout(() => {
                        this.switchToNextTimer();
                        this.startTimer();
                    }, 3000);
                }
            }

            switchTimer(timerType) {
                if (timerType === 'custom') {
                    const minutes = prompt('Enter custom time in minutes:', '10');
                    if (minutes && !isNaN(minutes) && minutes > 0) {
                        this.timeLeft = parseInt(minutes) * 60;
                        this.totalTime = this.timeLeft;
                    } else {
                        return; // Don't switch if cancelled or invalid
                    }
                }
                
                this.currentTimer = timerType;
                this.resetTimer();
                
                // Update active tab
                document.querySelectorAll('.timer-tab').forEach(tab => tab.classList.remove('active'));
                document.querySelector(`[data-timer="${timerType}"]`).classList.add('active');
                
                this.setTimerDuration();
            }

            setTimerDuration() {
                switch (this.currentTimer) {
                    case 'pomodoro':
                        this.timeLeft = this.settings.pomodoro * 60;
                        break;
                    case 'short-break':
                        this.timeLeft = this.settings.shortBreak * 60;
                        break;
                    case 'long-break':
                        this.timeLeft = this.settings.longBreak * 60;
                        break;
                    case 'custom':
                        // Keep current time
                        break;
                }
                this.totalTime = this.timeLeft;
            }

            setCustomTime(minutes) {
                this.timeLeft = minutes * 60;
                this.totalTime = this.timeLeft;
                this.currentTimer = 'custom';
                this.switchTimer('custom');
                this.updateDisplay();
            }

            updateDisplay() {
                const minutes = Math.floor(this.timeLeft / 60);
                const seconds = this.timeLeft % 60;
                this.timeDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                
                // Update progress circle
                const progress = ((this.totalTime - this.timeLeft) / this.totalTime) * 628.3185307179587;
                this.progressCircle.style.strokeDashoffset = 628.3185307179587 - progress;
            }

            // Task management
            showTaskInput() {
                document.getElementById('taskInputContainer').classList.remove('hidden');
                this.taskInput.focus();
            }

            hideTaskInput() {
                document.getElementById('taskInputContainer').classList.add('hidden');
                this.taskInput.value = '';
            }

            addTask() {
                const taskText = this.taskInput.value.trim();
                if (taskText) {
                    const task = {
                        id: Date.now(),
                        text: taskText,
                        completed: false,
                        createdAt: new Date().toISOString()
                    };
                    this.tasks.push(task);
                    this.saveTasks();
                    this.loadTasks();
                    this.hideTaskInput();
                }
            }

            toggleTask(taskId) {
                const task = this.tasks.find(t => t.id === taskId);
                if (task) {
                    task.completed = !task.completed;
                    if (task.completed) {
                        this.stats.tasks++;
                        this.saveStats();
                        this.updateStats();
                    }
                    this.saveTasks();
                    this.loadTasks();
                }
            }

            deleteTask(taskId) {
                this.tasks = this.tasks.filter(t => t.id !== taskId);
                this.saveTasks();
                this.loadTasks();
            }

            loadTasks() {
                this.taskList.innerHTML = '';
                
                if (this.tasks.length === 0) {
                    this.emptyTaskState.classList.remove('hidden');
                } else {
                    this.emptyTaskState.classList.add('hidden');
                    
                    this.tasks.forEach(task => {
                        const taskElement = document.createElement('div');
                        taskElement.className = `task-item flex items-center justify-between p-3 rounded-lg border border-glass-border ${task.completed ? 'completed' : ''}`;
                        taskElement.innerHTML = `
                            <div class="flex items-center space-x-3">
                                <input type="checkbox" ${task.completed ? 'checked' : ''} 
                                       onchange="app.toggleTask(${task.id})"
                                       class="w-4 h-4 text-primary-500 bg-transparent border-glass-border rounded focus:ring-primary-500">
                                <span class="${task.completed ? 'line-through opacity-60' : ''}">${task.text}</span>
                            </div>
                            <button onclick="app.deleteTask(${task.id})" class="text-red-400 hover:text-red-300 p-1">
                                <i class="fas fa-trash text-sm"></i>
                            </button>
                        `;
                        this.taskList.appendChild(taskElement);
                    });
                }
            }

            // Stats and data management
            updateStats() {
                this.pomodorosCompleted.textContent = this.stats.pomodoros;
                this.tasksCompleted.textContent = this.stats.tasks;
                this.focusTime.textContent = Math.floor(this.stats.focusTime / 60) + 'h';
            }

            initializeCharts() {
                // Replace chart with simple visual
                const canvas = document.getElementById('dailyChart');
                const ctx = canvas.getContext('2d');
                
                // Simple static visualization
                ctx.fillStyle = 'rgba(124, 58, 237, 0.2)';
                ctx.fillRect(0, canvas.height - 30, 40, 30);
                ctx.fillRect(50, canvas.height - 50, 40, 50);
                ctx.fillRect(100, canvas.height - 35, 40, 35);
                ctx.fillRect(150, canvas.height - 60, 40, 60);
                ctx.fillRect(200, canvas.height - 70, 40, 70);
                ctx.fillRect(250, canvas.height - 40, 40, 40);
                ctx.fillRect(300, canvas.height - 45, 40, 45);
            }

            // Modal management
            showStatsModal() {
                document.getElementById('statsModal').classList.remove('hidden');
            }

            hideStatsModal() {
                document.getElementById('statsModal').classList.add('hidden');
            }

            showSettingsModal() {
                document.getElementById('settingsModal').classList.remove('hidden');
                // Load current settings
                document.getElementById('pomodoroDuration').value = this.settings.pomodoro;
                document.getElementById('shortBreakDuration').value = this.settings.shortBreak;
                document.getElementById('longBreakDuration').value = this.settings.longBreak;
                document.getElementById('volumeControl').value = this.settings.volume;
                document.getElementById('autoStartToggle').checked = this.settings.autoStart;
            }

            hideSettingsModal() {
                document.getElementById('settingsModal').classList.add('hidden');
            }

            // Utility functions
            showNotification(message, type = 'info') {
                const notification = document.createElement('div');
                const bgColor = type === 'success' ? 'bg-green-500/20 border-green-500/30' : 
                               type === 'error' ? 'bg-red-500/20 border-red-500/30' : 
                               'bg-blue-500/20 border-blue-500/30';
                notification.className = `notification p-4 rounded-lg border ${bgColor} text-white`;
                notification.innerHTML = `
                    <div class="flex items-center justify-between">
                        <span>${message}</span>
                        <button onclick="this.parentElement.parentElement.remove()" class="ml-4">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                `;
                document.getElementById('notificationContainer').appendChild(notification);
                
                setTimeout(() => {
                    if (notification.parentElement) {
                        notification.remove();
                    }
                }, 5000);
            }

            playSound() {
                const soundType = document.getElementById('timerSound').value;
                if (soundType === 'none') return;
                
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                // Different sounds
                switch(soundType) {
                    case 'bell':
                        oscillator.frequency.value = 800;
                        oscillator.type = 'sine';
                        break;
                    case 'chime':
                        oscillator.frequency.value = 1200;
                        oscillator.type = 'triangle';
                        break;
                    case 'alarm':
                        oscillator.frequency.value = 440;
                        oscillator.type = 'square';
                        break;
                    case 'digital':
                        oscillator.frequency.value = 600;
                        oscillator.type = 'sawtooth';
                        break;
                }
                
                const volume = this.settings.volume / 100 * 0.3;
                gainNode.gain.setValueAtTime(volume, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 1);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 1);
            }

            changeTheme(theme) {
                const root = document.documentElement;
                const themes = {
                    'purple-pink': { primary: '#7c3aed', secondary: '#ec4899' },
                    'blue-teal': { primary: '#3b82f6', secondary: '#06b6d4' },
                    'orange-red': { primary: '#f97316', secondary: '#ef4444' },
                    'green-emerald': { primary: '#10b981', secondary: '#059669' }
                };
                
                if (themes[theme]) {
                    // Update CSS custom properties
                    const style = document.createElement('style');
                    style.innerHTML = `
                        :root {
                            --primary-500: ${themes[theme].primary};
                            --secondary-500: ${themes[theme].secondary};
                        }
                        .bg-gradient-to-r.from-primary-500.to-secondary-500 {
                            background: linear-gradient(to right, ${themes[theme].primary}, ${themes[theme].secondary}) !important;
                        }
                        #gradient stop:first-child {
                            stop-color: ${themes[theme].primary} !important;
                        }
                        #gradient stop:last-child {
                            stop-color: ${themes[theme].secondary} !important;
                        }
                    `;
                    document.head.appendChild(style);
                    this.showNotification(`Theme changed to ${theme.replace('-', ' ')}`, 'success');
                }
            }

            quickStart() {
                if (!this.isRunning) {
                    this.startTimer();
                } else {
                    this.pauseTimer();
                }
            }

            editTime() {
                if (!this.isRunning) {
                    const newTime = prompt('Enter time in minutes:', Math.floor(this.timeLeft / 60));
                    if (newTime && !isNaN(newTime) && newTime > 0) {
                        this.setCustomTime(parseInt(newTime));
                    }
                }
            }

            switchToNextTimer() {
                if (this.currentTimer === 'pomodoro') {
                    this.switchTimer('short-break');
                } else {
                    this.switchTimer('pomodoro');
                }
            }

            saveNotes() {
                const notes = document.getElementById('quickNotes').value;
                localStorage.setItem('quickNotes', notes);
                this.showNotification('Notes saved!', 'success');
            }

            copyShareLink() {
                const link = window.location.href;
                document.getElementById('shareLink').value = link;
                navigator.clipboard.writeText(link).then(() => {
                    this.showNotification('Link copied to clipboard!', 'success');
                });
            }

            // Data persistence
            saveTasks() {
                localStorage.setItem('tasks', JSON.stringify(this.tasks));
            }

            saveStats() {
                localStorage.setItem('stats', JSON.stringify(this.stats));
            }

            saveSettings() {
                localStorage.setItem('settings', JSON.stringify(this.settings));
            }

            saveAndCloseSettings() {
                this.saveSettings();
                this.hideSettingsModal();
                this.showNotification('Settings saved!', 'success');
            }

            exportData() {
                const data = {
                    tasks: this.tasks,
                    stats: this.stats,
                    settings: this.settings,
                    notes: localStorage.getItem('quickNotes') || ''
                };
                const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `voltedge-timer-data-${new Date().toISOString().split('T')[0]}.json`;
                a.click();
                URL.revokeObjectURL(url);
                this.showNotification('Data exported successfully!', 'success');
            }

            importData() {
                const input = document.createElement('input');
                input.type = 'file';
                input.accept = '.json';
                input.onchange = (e) => {
                    const file = e.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = (e) => {
                            try {
                                const data = JSON.parse(e.target.result);
                                if (data.tasks) this.tasks = data.tasks;
                                if (data.stats) this.stats = data.stats;
                                if (data.settings) this.settings = data.settings;
                                if (data.notes) localStorage.setItem('quickNotes', data.notes);
                                
                                this.saveTasks();
                                this.saveStats();
                                this.saveSettings();
                                this.loadTasks();
                                this.updateStats();
                                
                                this.showNotification('Data imported successfully!', 'success');
                            } catch (error) {
                                this.showNotification('Error importing data. Please check the file format.', 'error');
                            }
                        };
                        reader.readAsText(file);
                    }
                };
                input.click();
            }

            resetData() {
                if (confirm('Are you sure you want to reset all data? This action cannot be undone.')) {
                    localStorage.clear();
                    this.tasks = [];
                    this.stats = { pomodoros: 0, tasks: 0, focusTime: 0 };
                    this.settings = { pomodoro: 25, shortBreak: 5, longBreak: 15, volume: 50, autoStart: false };
                    
                    this.loadTasks();
                    this.updateStats();
                    this.showNotification('All data has been reset!', 'success');
                }
            }
        }

        // Initialize app when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            window.app = new TimerApp();
            
            // Load saved notes
            const savedNotes = localStorage.getItem('quickNotes');
            if (savedNotes) {
                document.getElementById('quickNotes').value = savedNotes;
            }
            
            // Set share link
            document.getElementById('shareLink').value = window.location.href;
        });

        // Request notification permission
        if ('Notification' in window && Notification.permission === 'default') {
            Notification.requestPermission();
        }
    </script>
</body>
</html>
